import { useRef, useEffect } from 'react'
import gsap from 'gsap'
import { useGSAP } from '@gsap/react'

const Cursor = () => {
  const cursor = useRef<HTMLDivElement>(null)
  const xTo = useRef<(value: number) => void>()
  const yTo = useRef<(value: number) => void>()

  const { contextSafe } = useGSAP(() => {
    xTo.current = gsap.quickTo(cursor.current, 'x', { duration: 0.8, ease: 'power3' })
    yTo.current = gsap.quickTo(cursor.current, 'y', { duration: 0.8, ease: 'power3' })
  })

  const moveCursor = contextSafe((e: MouseEvent) => {
    if (xTo.current && yTo.current) {
      xTo.current(e.clientX + 40)
      yTo.current(e.clientY + 40)
    }
  })

  useEffect(() => {
    window.addEventListener('mousemove', moveCursor)
    return () => window.removeEventListener('mousemove', moveCursor)
  }, [moveCursor])
  return (
    <div ref={cursor} className="cursor">
      <svg viewBox="0 0 70 76.2">
        <path d="M42.29,0c5.01,0,9.87.02,13.53,1.51.72.29,1.4.53,2.02.91,1.71,1.07,3.29,2.79,4.51,4.4.65.86,1.42,1.59,1.99,2.54.41.69.7,1.51,1.11,2.23.76,1.36,1.53,2.7,2.02,4.35.53,1.77.82,3.73,1.22,5.64.1.63.2,1.25.3,1.88.28,1.42.42,2.88.67,4.33.06.51.11,1.02.17,1.53.08.52.04,1.08.12,1.64.05.34.05.79,0,1.12,0,.2,0,.4-.01.6-.02.28-.05.55-.07.83-.21,1.17-.29,2.36-.5,3.55-.13.76-.13,1.53-.28,2.25-.3,1.46-.66,2.76-.97,4.24-.12.71-.25,1.41-.37,2.12-.36,1.49-.69,2.96-1.1,4.39-.26.91-.43,1.81-.75,2.65-.34.89-.79,1.7-1.15,2.54-.6,1.43-1.3,2.82-2.13,4.03-.84,1.23-1.88,2.25-2.77,3.42-.42.51-.84,1.03-1.25,1.54-.35.46-.74.95-1.18,1.33-.24.25-.48.49-.73.74-.66.56-1.33,1.1-2.03,1.62-.83.62-1.76,1.06-2.66,1.61-1.96,1.2-4.15,2.06-6.37,2.99-1.31.54-2.6,1.15-4.06,1.53-.77.2-1.57.24-2.39.42-.85.19-1.73.37-2.6.54-.77.11-1.53.22-2.3.34-.54.12-1.06.23-1.57.39-.94.29-2.05.64-3.28.36-.97-.22-2.01-.37-2.88-.73-1.6-.65-2.88-1.61-3.99-2.77-.71-.74-1.37-1.51-1.77-2.57-.38-1.02-.55-2.29-.77-3.45-.04-.36-.08-.72-.11-1.09-.09-.54,0-1.15-.08-1.72-.06-.7-.12-1.41-.18-2.11-.01-.26-.02-.51-.03-.77-.06-.4-.08-1.26-.02-1.68v-.6c.03-.74.07-1.48.1-2.22.08-.51,0-1.06.08-1.61.05-.35.04-.84-.01-1.18-.01-.34-.02-.68-.03-1.02,0-.33,0-.65-.01-.98-.01-.24-.02-.48-.03-.72-.07-.48-.07-.99-.16-1.43-.16-.86-.19-1.79-.55-2.44-1.49-2.75-5-2.51-8.51-3.09-.36-.06-.85-.02-1.17.03-.25,0-.49.01-.74.02-.18,0-.35.01-.53.02-.32-.03-.65-.07-.97-.1-.57-.12-1.15-.23-1.72-.35-.77-.16-1.52-.22-2.22-.45-1.34-.44-2.62-1.55-3.03-2.95-.56-1.91,1.15-3.11,2.15-3.73,1.04-.65,2.19-1.25,3.36-1.74,1.02-.42,2.1-.75,3.1-1.2,1.75-.79,3.43-1.81,4.85-2.97,1.29-1.05,2.18-2.49,3.06-3.98.71-1.19,1.4-2.44,1.95-3.79.49-1.21.88-2.47,1.37-3.66.85-2.05,1.85-4,2.9-5.83.6-1.04,1.15-2.08,1.8-3.05.57-.85,1.2-1.63,1.81-2.43.21-.23.42-.46.63-.7.61-.8,1.44-1.47,2.22-2.1,1.34-1.07,2.71-2.24,4.34-2.99.69-.32,1.49-.52,2.25-.76,1.39-.43,2.88-.65,4.4-.97.66-.09,1.33-.18,1.99-.27Z" />
      </svg>
    </div>
  )
}

export default Cursor
